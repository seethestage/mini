//Show Items Bookmarked
document.addEventListener('DOMContentLoaded',e=>{const t=()=>{const e=document.getElementById('bookmarked-shows').textContent.match(/\[(.*?)\]/g).map(e=>e.slice(1,-1));setTimeout(()=>{document.querySelectorAll('.show-bookmark-id').forEach(t=>{e.includes(t.textContent.trim())&&((e=t.nextElementSibling)=>{while(e){if(e.classList.contains('bookmark-selected')){e.style.display='block',console.log("Updated display for:",e);break}e=e.nextElementSibling}})()})},100)};t(),document.getElementById('load-more-button').addEventListener('click',()=>{console.log("Clicked 'load-more-button'"),setTimeout(t,500)}),document.querySelectorAll('.dropdown-link').forEach(e=>{e.addEventListener('click',()=>{console.log("Clicked 'dropdown-link'"),setTimeout(t,500)})});const n=new MutationObserver(e=>{e.forEach(e=>{if("childList"===e.type&&(e.addedNodes.length>0||e.removedNodes.length>0)){const t=[...e.addedNodes,...e.removedNodes],n=t.some(e=>e.classList&&e.classList.contains('tag')),o=t.some(e=>e.classList&&e.classList.contains('row'));(n||o)&&console.log(`Mutation detected with '${n?"tag":"row"}' class`),setTimeout(t,500)}})});n.observe(document.body,{childList:!0,subtree:!0})}),document.addEventListener('DOMContentLoaded',function(){document.body.addEventListener('click',function(e){let t=e.target.closest('.bookmark-unselected');t?(console.log("Clicked inside 'bookmark-unselected'"),function(e){const t=e.parentNode.querySelector('.bookmark-selected');t&&(t.style.display='block');const n=e.parentNode.querySelector('.show-bookmark-id');if(n){const e=`[${n.textContent}]`,t=document.getElementById('bookmarked-shows');t.value+=e}document.getElementById('update-bookmarks-btn').click()}(t)):t=e.target.closest('.bookmark-selected'),t&&(console.log("Clicked inside 'bookmark-selected'"),function(e){e.style.display='none';const t=e.parentNode.querySelector('.show-bookmark-id');if(t){const e=`[${t.textContent}]`,n=document.getElementById('bookmarked-shows');n.value.includes(e)&&(n.value=n.value.replace(e,''))}document.getElementById('update-bookmarks-btn').click()}(t))})});
//Show Items Starred
document.addEventListener('DOMContentLoaded',e=>{const t=()=>{const e=document.getElementById('starred-shows').textContent.match(/\[(.*?)\]/g).map(e=>e.slice(1,-1));setTimeout(()=>{document.querySelectorAll('.show-starred-id').forEach(t=>{if(e.includes(t.textContent.trim())){let e=t.nextElementSibling;for(;e;){if(e.classList.contains('starred-selected')){e.style.display='block',console.log("Updated display for:",e);break}e=e.nextElementSibling}}})},100)};t(),document.getElementById('load-more-button').addEventListener('click',()=>{console.log("Clicked 'load-more-button'"),setTimeout(t,500)}),document.querySelectorAll('.dropdown-link').forEach(e=>{e.addEventListener('click',()=>{console.log("Clicked 'dropdown-link'"),setTimeout(t,500)})});const o=new MutationObserver(e=>{e.forEach(e=>{if("childList"===e.type&&(e.addedNodes.length>0||e.removedNodes.length>0)){const t=[...e.addedNodes,...e.removedNodes].some(e=>e.classList&&e.classList.contains('tag')),o=[...e.addedNodes,...e.removedNodes].some(e=>e.classList&&e.classList.contains('row'));(t||o)&&(console.log(`Mutation detected with '${t?"tag":"row"}' class`),setTimeout(t,500))}})};o.observe(document.body,{childList:!0,subtree:!0})}),document.addEventListener('DOMContentLoaded',function(){document.body.addEventListener('click',function(e){e.target.classList.contains('starred-unselected')?function(e){const t=e.parentNode.querySelector('.starred-selected');t&&(t.style.display='block');const o=e.parentNode.querySelector('.show-starred-id');if(o){const e=`[${o.textContent}]`,t=document.getElementById('starred-shows');t.value+=e}document.getElementById('update-starred-btn').click()}(e.target):e.target.classList.contains('starred-selected')&&function(e){e.style.display='none';const t=e.parentNode.querySelector('.show-starred-id');if(t){const e=`[${t.textContent}]`,o=document.getElementById('starred-shows');o.value.includes(e)&&(o.value=o.value.replace(e,''))}document.getElementById('update-starred-btn').click()}(e.target)})});
//Show Items Stages Following
const processFollowedStages=()=>{console.log("Running processFollowedStages");const e=document.getElementById('followed-stages');""===e.textContent.trim()&&(e.textContent='[EMPTY]');const t=e.textContent.match(/\[(.*?)\]/g)?.map(e=>e.slice(1,-1))||[];setTimeout(()=>{document.querySelectorAll('.stage-id').forEach(e=>{let c=e.nextElementSibling;for(;c;){if(c.classList.contains('stage-selected')){c.style.display=t.includes(e.textContent.trim())?'block':'none',console.log("Updated display for:",c);break}c=c.nextElementSibling}})},100)};document.addEventListener('DOMContentLoaded',()=>{console.log("DOM fully loaded and parsed"),console.log("processFollowedStages function defined"),processFollowedStages(),document.getElementById('load-more-button').addEventListener('click',()=>{console.log("Clicked 'load-more-button'"),setTimeout(processFollowedStages,500)}),document.querySelectorAll('.dropdown-link').forEach(e=>{e.addEventListener('click',()=>{console.log("Clicked 'dropdown-link'"),setTimeout(processFollowedStages,500)})});new MutationObserver(e=>{e.forEach(e=>{'childList'===e.type&&(e.addedNodes.length>0||e.removedNodes.length>0)&&([...e.addedNodes,...e.removedNodes].some(e=>e.classList&&e.classList.contains('tag'))||[...e.addedNodes,...e.removedNodes].some(e=>e.classList&&e.classList.contains('row')))&&console.log(`Mutation detected with '${[...e.addedNodes,...e.removedNodes].some(e=>e.classList&&e.classList.contains('tag'))?'tag':'row'}' class`),setTimeout(processFollowedStages,500)})}).observe(document.body,{childList:!0,subtree:!0})}),document.addEventListener('DOMContentLoaded',function(){document.body.addEventListener('click',function(e){let t=e.target.closest('.stage-unselected');t?(console.log("Clicked inside 'stage-unselected'"),function(e){console.log("Handling 'stage-unselected'");const t=e.parentNode.querySelector('.stage-selected');t&&(t.style.display='block');const c=e.parentNode.querySelector('.stage-id');if(c){const e=`[${c.textContent}]`,t=document.getElementById('followed-stages');t.value+=e}document.getElementById('update-stages-btn').click(),setTimeout(processFollowedStages,1e3)}(t)):(t=e.target.closest('.stage-selected'))&&(console.log("Clicked inside 'stage-selected'"),function(e){console.log("Handling 'stage-selected'"),e.style.display='none';const t=e.parentNode.querySelector('.stage-id');if(t){const e=`[${t.textContent}]`,c=document.getElementById('followed-stages');c.value.includes(e)&&(c.value=c.value.replace(e,''))}document.getElementById('update-stages-btn').click(),setTimeout(processFollowedStages,1e3)}(t))})});
//Location Dropdown
const searchInput=document.getElementById('location-search'),locationsLists=[document.getElementById('locations-list-1'),document.getElementById('locations-list-2'),document.getElementById('locations-list-3'),document.getElementById('locations-list-4')];searchInput.addEventListener('input',function(){const e=searchInput.value.toLowerCase();locationsLists.forEach(t=>{t.querySelectorAll('.location-checkbox-label').forEach(t=>{const c=t.textContent.toLowerCase(),n=t.parentElement.parentElement;n.style.display=0===e.length||c.includes(e)?'flex':'none'})})});var locationSearch=document.getElementById('location-search'),locationDropdown=document.getElementById('location-dropdown');locationSearch.addEventListener('keyup',function(){locationDropdown.scrollTop=0;});
//Calendar Dropdown
function updateMonthTitles(){const e=["January","February","March","April","May","June","July","August","September","October","November","December"];let t=new Date().getMonth();for(let n=0;n<=12;n++){let c=(t+n)%12,o=e[c];document.getElementById("month-"+n+"-title").textContent=o}}function formatDate(e){const t={weekday:"long",year:"numeric",month:"long",day:"numeric"};return e.toLocaleDateString("en-US",t)}function deleteDivs(e,t){const n={0:6,1:5,2:4,3:3,4:2,5:1,6:0}[t],c=e.querySelectorAll(".non-day");for(let e=0;e<n&&e<c.length;e++)c[e].remove()}function setDateValues(e,t){const n=e.querySelectorAll(".day-btn-group");n.forEach((e,n)=>{const c=new Date(t.getTime());c.setDate(t.getDate()+n);new Date(t.getFullYear(),t.getMonth()+1,0);c.getMonth()!==t.getMonth()?e.remove():(e.querySelector(".day-btn").textContent=formatDate(c),e.querySelector(".day-overlay").textContent=c.getDate())})}function processMonthDiv(e){let t=new Date;0!==e&&(t=new Date(t.getFullYear(),t.getMonth()+e,1));const n=document.getElementById("month-"+e);deleteDivs(n,t.getDay()),setDateValues(n,t)}for(let e=0;e<=12;e++)processMonthDiv(e);function formatDate(e){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],c=t[e.getDay()],o=n[e.getMonth()],a=e.getDate(),r=e.getFullYear();return`${c}, ${o} ${a}, ${r}`}function setCurrentDate(){const e=new Date,t=formatDate(e),n=document.getElementById("today-value");n?n.textContent=t:console.error("Element with ID 'today-value' not found.")}updateMonthTitles(),setCurrentDate();
//Calendar Today Toggle
document.addEventListener('DOMContentLoaded',function(){function n(n){if(n){let t=n.querySelector('.day-btn');if(t){let e=t.textContent.trim().split(', ');e[1]=e[1].replace(/(\d+)/,'$1,'),document.getElementById('date-tag-txt')&&(document.getElementById('date-tag-txt').textContent=e.slice(1).join(' '));let o=document.getElementById('date-filter-field'),c=document.getElementById('date-icon');o&&c&&(o.classList.add('is-active'),c.classList.add('is-active'))}}}document.addEventListener('click',function(t){let e=t.target;for(;null!=e;){if(e.classList&&e.classList.contains('day-btn-group')){n(e);break}e=e.parentElement}}),document.getElementById('date-today-btn')&&document.getElementById('date-today-btn').addEventListener('click',function(){n(document.getElementById('date-today-btn'))})}),document.addEventListener('DOMContentLoaded',function(){function n(){document.querySelectorAll('.day-btn-group.is-active').forEach(n=>{n.classList.remove('is-active')}),document.getElementById('day-0-01').classList.add('is-active')}function t(){document.getElementById('today-toggle').classList.add('is-active'),document.getElementById('day-toggle').classList.add('is-active')}document.getElementById('day-0-01').addEventListener('click',function(){t(),n()}),document.getElementById('date-today-btn').addEventListener('click',function(){t(),n()}),document.getElementById('date-clear-trigger').addEventListener('click',function(){['today-toggle','day-toggle','date-filter-field','date-icon'].forEach(n=>{document.getElementById(n).classList.remove('is-active')}),document.querySelectorAll('.day-btn-group').forEach(n=>{n.classList.remove('is-active')}),document.getElementById('date-tag-txt').textContent=''}),document.getElementById('today-toggle').addEventListener('click',function(){this.classList.contains('is-active')?(document.getElementById('date-clear-trigger').click(),['today-toggle','day-toggle','date-filter-field','date-icon'].forEach(n=>{document.getElementById(n).classList.remove('is-active')}),document.querySelectorAll('.day-btn-group').forEach(n=>{n.classList.remove('is-active')}),document.getElementById('date-tag-txt').textContent=''):(t(),n(),document.getElementById('day-0-01').click())}),document.querySelectorAll('[name="date"]').forEach(n=>{n.addEventListener('change',function(){[...document.querySelectorAll('[name="date"]')].some(n=>n.checked)||document.getElementById('date-clear-trigger').click()})}),document.querySelectorAll('.day-btn-group:not(#day-0-01)').forEach(n=>{n.addEventListener('click',function(){document.getElementById('today-toggle').classList.contains('is-active')&&document.getElementById('today-toggle').classList.remove('is-active'),document.getElementById('day-toggle').classList.contains('is-active')&&document.getElementById('day-toggle').classList.remove('is-active')})})}),document.addEventListener('click',function(n){var t=n.target.closest('.day-btn-group');t&&(document.querySelectorAll('.day-btn-group').forEach(n=>{n.classList.remove('is-active')}),t.classList.add('is-active'))});
